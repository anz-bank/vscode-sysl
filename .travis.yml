language: node_js
sudo: false
node_js:
  - "stable"
  - "8.0"
  - "10.0"
before_install:
 - npm install -g vsce@latest
install:
  - npm install
script:
  - npm run lint
  - npm run compile
  - cd client && vsce package -o vscode-sysl-$TRAVIS_TAG.vsix
deploy:
- provider: releases
  draft: true
  tag_name: "$TRAVIS_TAG"
  name: vscode-sysl $TRAVIS_TAG
  file: client/vscode-sysl-$TRAVIS_TAG.vsix
  skip_cleanup: true
  prerelease: true
  on:
    repo: anz-bank/vscode-sysl
    tags: true
    condition: "$TRAVIS_NODE_VERSION = 10.0"
