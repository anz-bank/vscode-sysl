language: node_js
sudo: false
node_js:
  - "stable"
  - "8.0"
  - "10.0"
before_install:
 - npm install -g vsce@latest
install:
  - npm install
script:
  - npm run lint
  - npm run compile
  - cd client && vsce package
deploy:
- provider: releases
  draft: true
  tag_name: "$TRAVIS_TAG"
  name: Sysl $TRAVIS_TAG
  api_key:
    secure: "Qjy7sAoO+ht+CYAt7coBJfcP0+C+mD7l5fM79f4TrtZKGDuNlk+VLSm0pddoqb5Y6LM/JsIz09XxlTg1sfxmHtSJRWrGe8Uyp7hXxmJYKWgcDosjSIy3+p3a+WeKMT/WAxulnFXjUIv453hq1jnbG4u1fD7PL/F+E9etVWsDN3/ZLUJbtTzvyAUEacnxSelrgghnMsVd4Ru539LYCOoySQeo42d5do4DPS67eqEIes1LgAd6IsB3cPWFvqVLDZhKxoOay5lNmKRr+NZYZoT4qar4DUsG91cHUOkKqsrUY23m5zukzTZLOnl+HyT9UUmIawIstIR0rXMJUn6DqjS0c0awQQN6vx351bVxbv86muO2PDZk0Y8iA3WrgZMimwUuBJDdE5SVE+rgsIIwTwx3wENTxxKYe/CWGs4nWdEoYJfeps7bciZwBAxPe5QjmP51hwGLb1chxDBUa8GqDcXikr0zsFvA5/nzOyRM39VEO9iOfMZxovi6x12vH9hMSGZBFQuJfA339+I69KPeVzh1B4qQN2VLYpp82ly9PjEohSlTexZVSLnpaT+nMDaBVbc68jYL1AxiVGNPfamiMoBYoZO3aWIimfz8OdQ1AbtnZBWnqb+d4RKAC787wiR7NzY7uB+InOYeUh250YdM8jMwwkMnmoFdM5SQKN2HPYqNW/A="
  file_glob: true
  file:
  - client/vscode-sysl-0.0.1.vsix
  skip_cleanup: true
  prerelease: true
  on:
    repo: anz-bank/vscode-sysl
    tags: true
    condition: "$TRAVIS_OS_NAME = linux"
